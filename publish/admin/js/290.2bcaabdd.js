(self.webpackChunkbookadmin=self.webpackChunkbookadmin||[]).push([[290],{8241:function(t,e,a){"use strict";a.d(e,{Z:function(){return o}});var s={props:{total:{type:Number,default:0},size:{type:Number,default:10},index:{type:Number,default:1}},computed:{currentPage:{get(){return this.index},set(t){this.$emit("update:index",t)}},pageSize:{get(){return this.size},set(t){this.$emit("update:size",t)}}},methods:{pageSizeChanged(t){this.$emit("update:size",t),this.$emit("pagination")},pageChanged(t){this.$emit("update:index",t),this.$emit("pagination")}}},i=a(1001),l=a(4363),n=a.n(l),r=(0,i.Z)(s,(function(){var t=this;return(0,t._self._c)("el-pagination",{staticStyle:{"text-align":"right","margin-top":"5px"},attrs:{background:"",total:t.total,"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.pageChanged,"size-change":t.pageSizeChanged}})}),[],!1,null,null,null);"function"==typeof n()&&n()(r);var o=r.exports},5290:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var s=a(1743),i={data(){return{visible:!1,loading:!1,item:{}}},computed:{plist(){return this.item.products?JSON.parse(this.item.products):[]}},methods:{formatTime:s.m,show(t){this.visible=!0,this.item=t}}},l=a(1001),n={name:"Orders",components:{ItemDetail:(0,l.Z)(i,(function(){var t=this,e=t._self._c;return e("el-drawer",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"订单详情",visible:t.visible,size:"540px","custom-class":"detail-box"},on:{"update:visible":function(e){t.visible=e}}},[e("span",{staticClass:"ititle"},[t._v("订单ID：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.id))]),e("span",{staticClass:"ititle"},[t._v("用户（id）：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.name)+"（"+t._s(t.item?.uid)+"）")]),e("span",{staticClass:"ititle"},[t._v("订单金额：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.money))]),e("span",{staticClass:"ititle"},[t._v("状态：")]),e("el-tag",{staticClass:"ivalue",attrs:{type:t.$consts.orderStatus[t.item?.status]?.type}},[t._v(t._s(t.$consts.orderStatus[t.item?.status]?.text))]),e("span",{staticClass:"ititle"},[t._v("商品信息：")]),e("div",{staticClass:"ivalue"},[e("el-table",{attrs:{data:t.plist,size:"mini",border:""}},[e("el-table-column",{attrs:{label:"名称",prop:"name"}}),e("el-table-column",{attrs:{label:"价格",prop:"price"}}),e("el-table-column",{attrs:{label:"数量",prop:"total"}})],1)],1),e("span",{staticClass:"ititle"},[t._v("创建时间：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.formatTime(t.item?.createtime,"{y}-{m}-{d} {h}:{i}:{s}")))])],1)}),[],!1,null,"72c52d62",null).exports,Pagination:a(8241).Z},data(){return{listData:[],loading:!1,total:10,search:{uid:"",status:"",products:"",index:1,size:10}}},created(){this.loadData()},methods:{formatTime:s.m,loadData(){this.loading=!0,this.$api.order_list(this.search).then((t=>{this.listData=t.data,this.total=t.total})).catch((t=>{this.$message.error(t)})).finally((()=>{this.loading=!1}))},searchData(){this.search.index=1,this.loadData()},handleDelet(t){this.$confirm.warning("确定要删除吗？").then((()=>{this.$message.error("暂不支持删除功能！")})).catch()},handleDeletItems(){let t=this.$refs.listTable.selection;!t||t.length<1?this.$message.warning("未选中任何项！"):this.$confirm.warning(`确定要删除选中的 [ ${t.length} ] 项数据吗？删除后将不能恢复！`).then((()=>{this.$message.error("功能还没实现！")})).catch((()=>{}))}}},r=(0,l.Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"view-page"},[e("div",{staticClass:"toolbar"},[e("div",{staticStyle:{"padding-top":"2px"}},[e("el-button",{attrs:{icon:"el-icon-delete",title:"删除选择项",type:"warning",disabled:t.$refs.listTable?.selection.length<1},on:{click:t.handleDeletItems}},[t._v("删除")])],1),e("el-form",{ref:"searchForm",attrs:{model:t.search,inline:""}},[e("el-form-item",{attrs:{prop:"status"}},[e("el-radio-group",{model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[e("el-radio-button",{attrs:{border:"",label:""}},[t._v("All")]),t._l(t.$consts.orderStatus.entries,(function(a){return e("el-radio-button",{key:a.key,attrs:{label:a.key}},[t._v(t._s(a.text))])}))],2)],1),e("el-form-item",{attrs:{label:"",prop:"products"}},[e("el-input",{attrs:{placeholder:"请输入商品关键词",maxlength:"50"},model:{value:t.search.products,callback:function(e){t.$set(t.search,"products",e)},expression:"search.products"}})],1),e("el-form-item",[e("el-button",{attrs:{icon:"el-icon-search",type:"primary",loading:t.loading},on:{click:t.searchData}},[t._v("查询")]),e("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:function(e){return t.$refs.searchForm.resetFields()}}},[t._v("重置")])],1)],1)],1),e("div",{staticClass:"view-scroll"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listTable",staticClass:"table-scroll",attrs:{data:t.listData,"row-key":"id",border:"",stripe:""}},[e("el-table-column",{attrs:{type:"selection",width:"39"}}),e("el-table-column",{attrs:{label:"订单编号",width:"80",prop:"id",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.itemDetail.show(a.row)}}},[t._v(t._s(a.row.id.toString().padStart(6,"0")))])}}])}),e("el-table-column",{attrs:{label:"用户",width:"80",prop:"name"}}),e("el-table-column",{attrs:{label:"订单金额",width:"80",prop:"money"}}),e("el-table-column",{attrs:{label:"状态",width:"80",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(a){return e("el-tag",{attrs:{type:t.$consts.orderStatus[a.row.status].type}},[t._v(t._s(t.$consts.orderStatus[a.row.status].text))])}}])}),e("el-table-column",{attrs:{label:"商品信息","min-width":"200",width:"auto",prop:"products","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"创建时间",width:"100",align:"center",prop:"createtime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatTime(e.row.createtime,"{y}-{m}-{d}")))]}}])}),e("el-table-column",{attrs:{label:"操作","class-name":"table-link-btton",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{type:"warning"},on:{click:function(e){return t.handleDelet(a.row)}}},[t._v("删除")])]}}])})],1)],1),e("Pagination",{attrs:{total:t.total,size:t.search.size,index:t.search.index},on:{"update:size":function(e){return t.$set(t.search,"size",e)},"update:index":function(e){return t.$set(t.search,"index",e)},pagination:t.loadData}}),e("ItemDetail",{ref:"itemDetail"})],1)}),[],!1,null,"4c335468",null).exports},4363:function(){},1743:function(t,e,a){"use strict";function s(t,e){if(0===arguments.length||!t)return null;const a=e||"{y}-{m}-{d} {h}:{i}:{s}";let s;"object"==typeof t?s=t:("string"==typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"==typeof t&&10===t.toString().length&&(t*=1e3),s=new Date(t));const i={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),a:s.getDay()},l=a.replace(/{([ymdhisa])+}/g,((t,e)=>{const a=i[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return l}a.d(e,{m:function(){return s}})}}]);
//# sourceMappingURL=290.2bcaabdd.js.map