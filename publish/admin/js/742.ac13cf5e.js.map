{"version":3,"file":"js/742.ac13cf5e.js","mappings":"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","sources":["webpack://bookadmin/./src/components/ImgUpload.vue","webpack://bookadmin/./src/components/ImgUpload.vue?2076","webpack://bookadmin/src/components/ImgUpload.vue","webpack://bookadmin/./src/components/ImgUpload.vue?a90d","webpack://bookadmin/./src/views/User.vue","webpack://bookadmin/./src/views/User.vue?ac75","webpack://bookadmin/src/views/User.vue","webpack://bookadmin/./src/views/User.vue?898b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-upload',{ref:\"upload\",class:{hide:_vm.uploadHide},attrs:{\"action\":_vm.$api.URL.upload,\"list-type\":\"picture-card\",\"multiple\":true,\"accept\":\"image/*\",\"name\":\"file\",\"limit\":_vm.limit,\"file-list\":_vm.fileList,\"on-exceed\":_vm.onOutOfLimit,\"on-success\":_vm.handleSuccess,\"on-error\":_vm.handleError,\"before-upload\":_vm.handeleBefore},scopedSlots:_vm._u([{key:\"file\",fn:function({file}){return _c('div',{staticClass:\"imgbox\",class:{success:file.status}},[_c('img',{attrs:{\"src\":_vm.proxyURL(file.url),\"alt\":\"\"}}),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})])])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"}),_c('div',{staticStyle:{\"font-size\":\"0.8em\"},attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"支持最多\"+_vm._s(_vm.limit)+\"张图片，每张图片不超过\"+_vm._s(_vm.maxSize)+\"Kb\")])]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"append-to-body\":\"\",\"custom-class\":\"imgdialog\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{staticStyle:{\"max-width\":\"100%\",\"max-heigt\":\"100%\",\"object-fit\":\"contain\"},attrs:{\"src\":_vm.proxyURL(_vm.dialogImageUrl),\"alt\":\"\"}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImgUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImgUpload.vue?vue&type=script&lang=js&\"","<template>\r\n  <div>\r\n    <el-upload\r\n      ref=\"upload\"\r\n      :action=\"$api.URL.upload\"\r\n      list-type=\"picture-card\"\r\n      :multiple=\"true\"\r\n      accept=\"image/*\"\r\n      name=\"file\"\r\n      :limit=\"limit\"\r\n      :class=\"{hide:uploadHide}\"\r\n      :file-list=\"fileList\"\r\n      :on-exceed=\"onOutOfLimit\"\r\n      :on-success=\"handleSuccess\"\r\n      :on-error=\"handleError\"\r\n      :before-upload=\"handeleBefore\"\r\n    >\r\n      <!-- 上传按钮 -->\r\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\r\n      <!-- 提示内容 -->\r\n      <div slot=\"tip\" style=\"font-size:0.8em\">支持最多{{limit}}张图片，每张图片不超过{{maxSize}}Kb</div>\r\n      <!-- file模板 -->\r\n      <div slot=\"file\" slot-scope=\"{file}\" class=\"imgbox\" :class=\"{success:file.status}\">\r\n        <!-- 缩略图的路径，如果相对路径则添加代理前缀-->\r\n        <img :src=\"proxyURL(file.url)\" alt />\r\n        <span class=\"el-upload-list__item-actions\">\r\n          <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\r\n            <i class=\"el-icon-zoom-in\"></i>\r\n          </span>\r\n          <span class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </span>\r\n      </div>\r\n    </el-upload>\r\n    <!-- 嵌套的dialog，需要设置append-to-body，嵌入自身到body元素 -->\r\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body custom-class=\"imgdialog\">\r\n      <img :src=\"proxyURL(dialogImageUrl)\" alt style=\"max-width: 100%;max-heigt: 100%;object-fit:contain\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ImgUpload',\r\n  props: {\r\n    value: { type: String, default: '' },    //文件路径集合字符串，逗号隔开\r\n    limit: { type: Number, default: 5 },     //数量限制\r\n    maxSize: { type: Number, default: 2048 } //文件大小（单位Kb)\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      dialogImageUrl: '',\r\n      innerValueChange: false, //标记是否内部文件变化\r\n      fileList: [], //内部用的文件列表\r\n    }\r\n  },\r\n  computed: {\r\n    //当达到上传文件数量限制的时候，隐藏上传按钮\r\n    uploadHide() { return this.fileList?.length == this.limit },\r\n  },\r\n  watch: {\r\n    value(nval) {\r\n      //如果是内部文件变化，则不处理，避免循环更新\r\n      if (this.innerValueChange) {\r\n        this.innerValueChange = false;\r\n        return;\r\n      }\r\n      //同步已有文件，只在外部传入值时执行\r\n      this.fileList = this.value ? this.value.split(',').map(f => { return { url: f } }) : [];\r\n    }\r\n  },\r\n  mounted() {\r\n    //首次初始化\r\n    this.fileList = this.value ? this.value.split(',').map(f => { return { url: f } }) : [];\r\n  },\r\n  methods: {\r\n    //超出数量限制\r\n    onOutOfLimit() {\r\n      this.$message.warning('文件上传个数超过限制！');\r\n    },\r\n    //预览\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    proxyURL(url) {\r\n      return url.startsWith('/') ? this.$api.URL.proxy + url : url;\r\n    },\r\n    //删除项\r\n    handleRemove(file) {\r\n      this.fileList.remove(f => f.url == file.url)\r\n      this.emitValue();\r\n    },\r\n    //上传之前，用于验证\r\n    handeleBefore(file) {\r\n      if (file.size / 1024 > this.maxSize) {\r\n        this.$message.error(`文件大小超过限制：${this.maxSize}Kb`);\r\n        return false\r\n      }\r\n    },\r\n    // 上传成功\r\n    handleSuccess(res, file, list) {\r\n      this.fileList.push(file);\r\n      this.fileList = Array.from(this.fileList);  //强制更新\r\n      this.emitValue();\r\n    },\r\n    handleError(err) {\r\n      this.$message.error('上传失败，请重试：' + err);\r\n    },\r\n    //更新prop\r\n    emitValue() {\r\n      this.innerValueChange = true;\r\n      this.$emit('input', this.fileList.map(f => f.response ? f.response.url : f.url).join(','));\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.imgbox {\r\n  width: 100%;\r\n  height: 100%;\r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n  }\r\n  // 缩略图上加一个状态提示\r\n  &.success::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    right: 0px;\r\n    width: 0;\r\n    height: 0;\r\n    text-align: center;\r\n    border-top: 24px solid #13ce66;\r\n    border-left: 30px solid transparent;\r\n  }\r\n  &.success::after {\r\n    content: \"✓\";\r\n    position: absolute;\r\n    right: 3px;\r\n    top: -4px;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n\r\n<style>\r\n.imgdialog {\r\n  width: max-content;\r\n  height: max-content;\r\n  max-width: 80%;\r\n}\r\n.imgdialog .el-dialog__header {\r\n  background: none;\r\n}\r\n/* 达到数量时，隐藏上传按钮 */\r\n.hide .el-upload--picture-card {\r\n  display: none;\r\n}\r\n/* 调整/取消动画 */\r\n.el-list-enter-active,\r\n.el-list-leave-active {\r\n  transition: none;\r\n}\r\n</style>","import { render, staticRenderFns } from \"./ImgUpload.vue?vue&type=template&id=ada29738&scoped=true&\"\nimport script from \"./ImgUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./ImgUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImgUpload.vue?vue&type=style&index=0&id=ada29738&prod&lang=less&scoped=true&\"\nimport style1 from \"./ImgUpload.vue?vue&type=style&index=1&id=ada29738&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ada29738\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page\"},[_c('p',{staticClass:\"h\"},[_vm._v(\"个人信息\")]),_c('el-form',{attrs:{\"model\":_vm.user,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"头像\"}},[_c('ImgUpload',{attrs:{\"limit\":1},model:{value:(_vm.user.img),callback:function ($$v) {_vm.$set(_vm.user, \"img\", $$v)},expression:\"user.img\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.user.pwd),callback:function ($$v) {_vm.$set(_vm.user, \"pwd\", $$v)},expression:\"user.pwd\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.save}},[_vm._v(\"保存修改\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"page\">\r\n    <p class=\"h\">个人信息</p>\r\n    <el-form :model=\"user\" label-width=\"100px\">\r\n      <el-form-item label=\"头像\">\r\n        <ImgUpload v-model=\"user.img\" :limit=\"1\"></ImgUpload>\r\n      </el-form-item>\r\n      <el-form-item label=\"用户名\">\r\n        <el-input v-model=\"user.name\" placeholder></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\">\r\n        <el-input v-model=\"user.pwd\" type=\"password\" placeholder></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"success\" @click=\"save\">保存修改</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ImgUpload from '@/components/ImgUpload.vue'\r\n\r\nexport default {\r\n  name: 'User',\r\n  components: { ImgUpload },\r\n  data() {\r\n    return {\r\n      user: { img: '/file/f1.jpg', name: '小卤蛋' }\r\n    }\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.$message.warning('别点了，这个没实现！')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.page {\r\n  margin: 10px;\r\n  .h {\r\n    line-height: 40px;\r\n  }\r\n  form {\r\n    width: 600px;\r\n  }\r\n}\r\n</style>","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=ebe96f1e&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=ebe96f1e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ebe96f1e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["name","props","value","type","default","limit","maxSize","data","dialogVisible","dialogImageUrl","innerValueChange","fileList","computed","uploadHide","watch","url","mounted","methods","onOutOfLimit","handlePictureCardPreview","proxyURL","handleRemove","handeleBefore","handleSuccess","handleError","emitValue","_vm","this","_c","_self","ref","class","hide","attrs","$api","URL","upload","scopedSlots","_u","key","fn","file","staticClass","success","status","on","$event","slot","staticStyle","_v","_s","components","ImgUpload","user","img","save","model","callback","$$v","$set","expression","pwd"],"sourceRoot":""}