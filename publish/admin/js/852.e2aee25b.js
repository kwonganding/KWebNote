(self.webpackChunkbookadmin=self.webpackChunkbookadmin||[]).push([[852],{1582:function(t,e,i){"use strict";i.d(e,{Z:function(){return o}});var a=i(5242),l=i(2403),s={components:{Editor:a.M,Toolbar:a.o},props:{html:{type:String},height:{default:"200px"}},computed:{content:{get(){return this.html},set(t){this.$emit("update:html",t)}}},data(){return{editor:null,toolbarConfig:{excludeKeys:["group-video","emotion","lineHeight"]},editorConfig:{placeholder:"请输入内容...",maxLength:8e3,MENU_CONF:{uploadImage:{server:this.$api.URL.upload,fieldName:"file",maxFileSize:8388608,maxNumberOfFiles:1,allowedFileTypes:["image/*"],timeout:9e3,customInsert:(t,e)=>{e(this.$api.URL.proxy+t.url)}}}},mode:"default",onOutOfMaxLength:(0,l.P2)((()=>this.$message.warning("富文本内容长度超过最大值："+this.editorConfig.maxLength)),1e3)}},methods:{onCreated(t){this.editor=Object.seal(t)},onMaxLength(){this.onOutOfMaxLength()}},updated(){},beforeDestroy(){this.editor?.destroy()}},o=(0,i(1001).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{border:"1px solid #DCDFE6"}},[e("Toolbar",{staticStyle:{"border-bottom":"1px solid #DCDFE6"},attrs:{editor:t.editor,defaultConfig:t.toolbarConfig,mode:t.mode}}),e("Editor",{staticStyle:{"overflow-y":"hidden"},style:{height:t.height},attrs:{defaultConfig:t.editorConfig,mode:t.mode},on:{onMaxLength:t.onMaxLength,onCreated:t.onCreated},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)}),[],!1,null,null,null).exports},2559:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}}),i(7658);var a={name:"ImgUpload",props:{value:{type:String,default:""},limit:{type:Number,default:5},maxSize:{type:Number,default:2048}},data(){return{dialogVisible:!1,dialogImageUrl:"",innerValueChange:!1,fileList:[]}},computed:{uploadHide(){return this.fileList?.length==this.limit}},watch:{value(t){this.innerValueChange?this.innerValueChange=!1:this.fileList=this.value?this.value.split(",").map((t=>({url:t}))):[]}},mounted(){this.fileList=this.value?this.value.split(",").map((t=>({url:t}))):[]},methods:{onOutOfLimit(){this.$message.warning("文件上传个数超过限制！")},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},proxyURL(t){return t.startsWith("/")?this.$api.URL.proxy+t:t},handleRemove(t){this.fileList.remove((e=>e.url==t.url)),this.emitValue()},handeleBefore(t){if(t.size/1024>this.maxSize)return this.$message.error(`文件大小超过限制：${this.maxSize}Kb`),!1},handleSuccess(t,e,i){this.fileList.push(e),this.fileList=Array.from(this.fileList),this.emitValue()},handleError(t){this.$message.error("上传失败，请重试："+t)},emitValue(){this.innerValueChange=!0,this.$emit("input",this.fileList.map((t=>t.response?t.response.url:t.url)).join(","))}}},l=(0,i(1001).Z)(a,(function(){var t=this,e=t._self._c;return e("div",[e("el-upload",{ref:"upload",class:{hide:t.uploadHide},attrs:{action:t.$api.URL.upload,"list-type":"picture-card",multiple:!0,accept:"image/*",name:"file",limit:t.limit,"file-list":t.fileList,"on-exceed":t.onOutOfLimit,"on-success":t.handleSuccess,"on-error":t.handleError,"before-upload":t.handeleBefore},scopedSlots:t._u([{key:"file",fn:function({file:i}){return e("div",{staticClass:"imgbox",class:{success:i.status}},[e("img",{attrs:{src:t.proxyURL(i.url),alt:""}}),e("span",{staticClass:"el-upload-list__item-actions"},[e("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(i)}}},[e("i",{staticClass:"el-icon-zoom-in"})]),e("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(i)}}},[e("i",{staticClass:"el-icon-delete"})])])])}}])},[e("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"}),e("div",{staticStyle:{"font-size":"0.8em"},attrs:{slot:"tip"},slot:"tip"},[t._v("支持最多"+t._s(t.limit)+"张图片，每张图片不超过"+t._s(t.maxSize)+"Kb")])]),e("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":"","custom-class":"imgdialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{staticStyle:{"max-width":"100%","max-heigt":"100%","object-fit":"contain"},attrs:{src:t.proxyURL(t.dialogImageUrl),alt:""}})])],1)}),[],!1,null,"ada29738",null).exports},8241:function(t,e,i){"use strict";i.d(e,{Z:function(){return n}});var a={props:{total:{type:Number,default:0},size:{type:Number,default:10},index:{type:Number,default:1}},computed:{currentPage:{get(){return this.index},set(t){this.$emit("update:index",t)}},pageSize:{get(){return this.size},set(t){this.$emit("update:size",t)}}},methods:{pageSizeChanged(t){this.$emit("update:size",t),this.$emit("pagination")},pageChanged(t){this.$emit("update:index",t),this.$emit("pagination")}}},l=i(1001),s=i(4363),o=i.n(s),r=(0,l.Z)(a,(function(){var t=this;return(0,t._self._c)("el-pagination",{staticStyle:{"text-align":"right","margin-top":"5px"},attrs:{background:"",total:t.total,"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.pageChanged,"size-change":t.pageSizeChanged}})}),[],!1,null,null,null);"function"==typeof o()&&o()(r);var n=r.exports},3852:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return b}}),i(7658);var a=i(1743),l={data(){return{visible:!1,loading:!1,item:{}}},computed:{imgList(){return this.item?.imgs?this.item?.imgs?.split(","):[]}},methods:{formatTime:a.m,show(t){this.visible=!0,this.loading=!0,this.$api.book_id({id:t.id}).then((t=>{this.item=t.data})).catch((t=>{this.$message.error(t)})).finally((()=>{this.loading=!1}))}}},s=i(1001),o=(0,s.Z)(l,(function(){var t=this,e=t._self._c;return e("el-drawer",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.item?.name,visible:t.visible,size:"700px","custom-class":"detail-box"},on:{"update:visible":function(e){t.visible=e}}},[e("span",{staticClass:"ititle"},[t._v("作者：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.author))]),e("span",{staticClass:"ititle"},[t._v("上架状态：")]),e("el-tag",{staticClass:"ivalue",attrs:{type:t.$consts.bookStatus[t.item?.status]?.type}},[t._v(t._s(t.$consts.bookStatus[t.item?.status]?.text))]),e("span",{staticClass:"ititle"},[t._v("价格：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.price))]),e("span",{staticClass:"ititle"},[t._v("标签：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.item?.tag))]),e("span",{staticClass:"ititle"},[t._v("图片：")]),e("ul",{staticClass:"ivalue imglist"},t._l(t.imgList,(function(i){return e("li",{key:i},[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("img",{staticStyle:{"vertical-align":"middle"},attrs:{slot:"reference",src:t.$api.URL.proxy+i,width:"80px",height:"80px"},slot:"reference"}),e("img",{attrs:{src:t.$api.URL.proxy+i,width:"600px"}})])],1)})),0),e("span",{staticClass:"ititle"},[t._v("内容简介：")]),e("div",{staticClass:"ivalue",domProps:{innerHTML:t._s(t.item?.introduction)}}),e("span",{staticClass:"ititle"},[t._v("创建时间：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.formatTime(t.item?.createtime,"{y}-{m}-{d} {h}:{i}:{s}")))]),e("span",{staticClass:"ititle"},[t._v("更新时间：")]),e("p",{staticClass:"ivalue"},[t._v(t._s(t.formatTime(t.item?.lasttime,"{y}-{m}-{d} {h}:{i}:{s}")))])],1)}),[],!1,null,"6b09e65b",null).exports,r=i(1582),n=i(2559),c={name:"TreeSelect",props:{value:{default:null},data:{type:Array},onlyLeaf:{type:Boolean,default:!0},options:{type:Object,default:function(){return{value:"id",label:"name",children:"children"}}}},computed:{currentText:{get(){return this.currentItem?.[this.options.label]},set(){}}},watch:{value(t){this.innerValueChange?this.innerValueChange=!1:this.initialize()}},data(){return{currentItem:{},innerValueChange:!1}},methods:{handleCurrentChange(t,e){!this.onlyLeaf||e.isLeaf?this.emitValue(t):this.$refs.tree.setCurrentKey(this.value)},handelClear(){this.emitValue({}),this.$refs.tree.setCurrentKey(null)},initialize(){let t=this.value;const e=t?this.$refs.tree.getNode(t):null;this.currentItem=e?e.data:{},this.$refs.tree.setCurrentKey(t)},emitValue(t){this.currentItem=t,this.innerValueChange=!0,this.$emit("input",t[this.options.value])}}},u=(0,s.Z)(c,(function(){var t=this,e=t._self._c;return e("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{clear:t.handelClear},model:{value:t.currentText,callback:function(e){t.currentText=e},expression:"currentText"}},[e("el-option",{staticClass:"option view-scroll",attrs:{value:t.currentItem[t.options.value],label:t.currentItem[t.options.label]}},[e("el-tree",{ref:"tree",staticClass:"tree",attrs:{data:t.data,"node-key":t.options.value,props:t.options},on:{"current-change":t.handleCurrentChange}})],1)],1)}),[],!1,null,"6c7495a8",null).exports,m=i(8211),d=i(1806),p={components:{Editor:r.Z,ImgUpload:n.Z,TreeSelect:u},data:()=>({visible:!1,fullscreen:!1,loading:!1,saveLoading:!1,item:{},itemRules:m.Ux,dialogType:"新增",bookTags:[],bookTypes:[]}),methods:{formatTime:a.m,save(){this.$refs.itemForm.validate(((t,e)=>{t?(this.saveLoading=!0,this.$api.book_save(this.item).then((t=>{this.$message.success("保存成功"),this.$emit("updated"),this.visible=!1})).catch((t=>{this.$message.error(t)})).finally((()=>{this.saveLoading=!1}))):this.$message.error("输入有误，请修改后重新提交！")}))},show(t){this.visible=!0,this.loadDicData(),t?(this.dialogType="修改",this.loading=!0,this.$api.book_id({id:t.id}).then((t=>{this.item=t.data})).catch((t=>{this.$message.error(t)})).finally((()=>{this.loading=!1}))):this.item=new m.fy},loadDicData(){(0,d.t6)(d.vK.bookTag).then((t=>this.bookTags=t)).catch((t=>{console.log(t)})),(0,d.t6)(d.vK.bookType,!0).then((t=>this.bookTypes=t))}}},h=(0,s.Z)(p,(function(){var t=this,e=t._self._c;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.visible,"show-close":!1,fullscreen:t.fullscreen,width:"1160px",top:"10vh"},scopedSlots:t._u([{key:"title",fn:function(){return[e("span",[e("i",{staticClass:"el-icon-edit"}),t._v(" "+t._s(t.dialogType)+" -书籍信息 ")]),e("span",{staticStyle:{float:"right","margin-top":"-5px"}},[e("el-button",{attrs:{icon:"el-icon-full-screen",type:"text",title:"全屏"},on:{click:function(e){t.fullscreen=!t.fullscreen}}}),e("el-button",{attrs:{icon:"el-icon-close",type:"text",title:"关闭"},on:{click:function(e){t.visible=!1}}})],1)]},proxy:!0}])},[e("el-form",{ref:"itemForm",attrs:{model:t.item,rules:t.itemRules,"label-width":"90px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"名称：",prop:"name"}},[e("el-input",{attrs:{placeholder:"输入书籍名称",maxlength:"50"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"作者：",prop:"author"}},[e("el-input",{attrs:{placeholder:"输入书籍作者",maxlength:"50"},model:{value:t.item.author,callback:function(e){t.$set(t.item,"author",e)},expression:"item.author"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"图书分类：",prop:"catgory"}},[e("TreeSelect",{staticStyle:{width:"100%"},attrs:{data:t.bookTypes},model:{value:t.item.catgory,callback:function(e){t.$set(t.item,"catgory",e)},expression:"item.catgory"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"标签：",prop:"tag"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.item.tag,callback:function(e){t.$set(t.item,"tag",e)},expression:"item.tag"}},t._l(t.bookTags,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"价格：",prop:"price"}},[e("el-input",{attrs:{placeholder:"输入价格"},model:{value:t.item.price,callback:function(e){t.$set(t.item,"price",t._n(e))},expression:"item.price"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"上架状态：",prop:"status"}},[e("el-radio-group",{model:{value:t.item.status,callback:function(e){t.$set(t.item,"status",e)},expression:"item.status"}},t._l(t.$consts.bookStatus.entries,(function(i){return e("el-radio",{key:i.key,attrs:{border:"",label:i.key}},[t._v(t._s(i.text))])})),1)],1)],1)],1),e("el-form-item",{attrs:{label:"图片："}},[e("ImgUpload",{model:{value:t.item.imgs,callback:function(e){t.$set(t.item,"imgs",e)},expression:"item.imgs"}})],1),e("el-form-item",{attrs:{label:"内容简介："}},[e("Editor",{attrs:{html:t.item.introduction},on:{"update:html":function(e){return t.$set(t.item,"introduction",e)}}})],1),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.item.id,expression:"item.id"}]},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"创建时间：",prop:"price"}},[e("span",[t._v(t._s(t.formatTime(t.item.createtime,"{y}-{m}-{d} {h}:{i}:{s}")))])])],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"更新时间：",prop:"tag"}},[e("span",[t._v(t._s(t.formatTime(t.item.lasttime,"{y}-{m}-{d} {h}:{i}:{s}")))])])],1)],1)],1),e("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-success",loading:t.saveLoading},on:{click:t.save}},[t._v("保存")])],1)],1)}),[],!1,null,null,null).exports,g={components:{Editor:r.Z,ImgUpload:n.Z,TreeSelect:u},data:()=>({visible:!1,loading:!1,saveLoading:!1,item:{},itemRules:m.Ux,dialogType:"新增",bookTags:[],bookTypes:[]}),methods:{formatTime:a.m,save(){this.$refs.itemForm.validate(((t,e)=>{t?(this.saveLoading=!0,this.$api.book_save(this.item).then((t=>{this.$message.success("保存成功"),this.$emit("updated"),this.visible=!1})).catch((t=>{this.$message.error(t)})).finally((()=>{this.saveLoading=!1}))):this.$message.error("输入有误，请修改后重新提交！")}))},show(t){this.visible=!0,this.loadDicData(),t?(this.dialogType="修改",this.loading=!0,this.$api.book_id({id:t.id}).then((t=>{this.item=t.data})).catch((t=>{this.$message.error(t)})).finally((()=>{this.loading=!1}))):this.item=new m.fy},loadDicData(){(0,d.t6)(d.vK.bookTag).then((t=>this.bookTags=t)).catch((t=>{console.log(t)})),(0,d.t6)(d.vK.bookType,!0).then((t=>this.bookTypes=t))}}},f={name:"Books",components:{BookDetail:o,BookDialog:h,BookDialogPlus:(0,s.Z)(g,(function(){var t=this,e=t._self._c;return e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dialogPlus",attrs:{visible:t.visible,"show-close":!1,width:"100%",top:"0",modal:!1}},[e("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"title"},slot:"title"},[e("span",{staticStyle:{"font-weight":"bold","line-height":"32px"}},[e("i",{staticClass:"el-icon-edit"}),t._v(" "+t._s(t.dialogType)+" -书籍信息 ")]),e("span",[e("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-success",loading:t.saveLoading},on:{click:t.save}},[t._v("保存")])],1)]),e("el-form",{ref:"itemForm",attrs:{model:t.item,rules:t.itemRules,"label-width":"90px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"名称：",prop:"name"}},[e("el-input",{attrs:{placeholder:"输入书籍名称",maxlength:"50"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"作者：",prop:"author"}},[e("el-input",{attrs:{placeholder:"输入书籍作者",maxlength:"50"},model:{value:t.item.author,callback:function(e){t.$set(t.item,"author",e)},expression:"item.author"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"图书分类：",prop:"catgory"}},[e("TreeSelect",{staticStyle:{width:"100%"},attrs:{data:t.bookTypes},model:{value:t.item.catgory,callback:function(e){t.$set(t.item,"catgory",e)},expression:"item.catgory"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"标签：",prop:"tag"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.item.tag,callback:function(e){t.$set(t.item,"tag",e)},expression:"item.tag"}},t._l(t.bookTags,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"价格：",prop:"price"}},[e("el-input",{attrs:{placeholder:"输入价格"},model:{value:t.item.price,callback:function(e){t.$set(t.item,"price",t._n(e))},expression:"item.price"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"上架状态：",prop:"status"}},[e("el-radio-group",{model:{value:t.item.status,callback:function(e){t.$set(t.item,"status",e)},expression:"item.status"}},t._l(t.$consts.bookStatus.entries,(function(i){return e("el-radio",{key:i.key,attrs:{border:"",label:i.key}},[t._v(t._s(i.text))])})),1)],1)],1)],1),e("el-form-item",{attrs:{label:"图片："}},[e("ImgUpload",{model:{value:t.item.imgs,callback:function(e){t.$set(t.item,"imgs",e)},expression:"item.imgs"}})],1),e("el-form-item",{attrs:{label:"内容简介："}},[e("Editor",{attrs:{html:t.item.introduction},on:{"update:html":function(e){return t.$set(t.item,"introduction",e)}}})],1),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.item.id,expression:"item.id"}]},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"创建时间：",prop:"price"}},[e("span",[t._v(t._s(t.formatTime(t.item.createtime,"{y}-{m}-{d} {h}:{i}:{s}")))])])],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"更新时间：",prop:"tag"}},[e("span",[t._v(t._s(t.formatTime(t.item.lasttime,"{y}-{m}-{d} {h}:{i}:{s}")))])])],1)],1)],1)],1)}),[],!1,null,null,null).exports,Pagination:i(8241).Z},data(){return{listData:[],loading:!1,total:10,search:{status:"normal",name:"",author:"",index:1,size:10}}},created(){this.loadData()},methods:{formatTime:a.m,loadData(){this.loading=!0,this.$api.book_list(this.search).then((t=>{this.listData=t.data,this.total=t.total})).catch((t=>{this.$message.error(t)})).finally((()=>{this.loading=!1}))},searchData(){this.search.index=1,this.loadData()},handleDelet(t){this.$confirm.warning("确定要删除吗？").then((()=>{this.$message.error("暂不支持删除功能！")})).catch()},handleDeletItems(){let t=this.$refs.listTable.selection;!t||t.length<1?this.$message.warning("未选中任何项！"):this.$confirm.warning(`确定要删除选中的 [ ${t.length} ] 项数据吗？删除后将不能恢复！`).then((()=>{this.$message.error("功能还没实现！")})).catch((()=>{}))},previewImg(t){if(t)return this.$api.URL.proxy+t?.split(",")[0]},handleAdd(){this.$router.push("/book/add")},handleEdit(){let t=this.$refs.listTable.selection;!t||t.length<1?this.$message.warning("未选中任何项！"):this.$router.push("/book/update/"+t[0].id)}}},b=(0,s.Z)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"view-page"},[e("div",{staticClass:"toolbar"},[e("div",{staticStyle:{"padding-top":"2px"}},[e("el-button",{attrs:{type:"primary",icon:"icon icon-add",title:"弹窗模式-覆盖父视图"},on:{click:function(e){return t.$refs.itemDialogPlus.show()}}},[t._v("新增")]),e("el-button",{attrs:{icon:"el-icon-plus",type:"primary",title:"普通弹窗模式"},on:{click:function(e){return t.$refs.itemDialog.show()}}},[t._v("新增2")]),e("el-button",{attrs:{icon:"el-icon-delete",title:"删除选择项",type:"warning",disabled:t.$refs.listTable?.selection.length<1},on:{click:t.handleDeletItems}},[t._v("删除")])],1),e("el-form",{ref:"searchForm",attrs:{model:t.search,inline:""}},[e("el-form-item",{attrs:{prop:"status"}},[e("el-radio-group",{model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[e("el-radio-button",{attrs:{border:"",label:""}},[t._v("All")]),t._l(t.$consts.bookStatus.entries,(function(i){return e("el-radio-button",{key:i.key,attrs:{label:i.key}},[t._v(t._s(i.text))])}))],2)],1),e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入名称关键词",maxlength:"50"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),e("el-form-item",{attrs:{label:"作者",prop:"author"}},[e("el-input",{attrs:{placeholder:"请输入作者关键词",maxlength:"50"},model:{value:t.search.author,callback:function(e){t.$set(t.search,"author",e)},expression:"search.author"}})],1),e("el-form-item",[e("el-button",{attrs:{icon:"el-icon-search",type:"primary",loading:t.loading},on:{click:t.searchData}},[t._v("查询")]),e("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:function(e){return t.$refs.searchForm.resetFields()}}},[t._v("重置")])],1)],1)],1),e("div",{staticClass:"view-scroll"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listTable",staticClass:"table-scroll",attrs:{data:t.listData,"row-key":"id",border:"",stripe:""}},[e("el-table-column",{attrs:{type:"selection",width:"39"}}),e("el-table-column",{attrs:{label:"ID",width:"54px",prop:"id",align:"center"}}),e("el-table-column",{attrs:{label:"名称","min-width":"200",width:"auto",prop:"name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(i){return e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.itemDetail.show(i.row)}}},[t._v(t._s(i.row.name))])}}])}),e("el-table-column",{attrs:{label:"作者",width:"200",prop:"author","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"标签",width:"80",align:"center",prop:"tag"}}),e("el-table-column",{attrs:{label:"价格",width:"80",align:"center",prop:"price"}}),e("el-table-column",{attrs:{label:"评论数",width:"80",align:"center",prop:"comments"}}),e("el-table-column",{attrs:{label:"图片",width:"65",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("img",{staticStyle:{"vertical-align":"middle"},attrs:{slot:"reference",src:t.previewImg(i.row.imgs),width:"40px"},slot:"reference"}),e("img",{attrs:{src:t.previewImg(i.row.imgs),width:"500px"}})])]}}])}),e("el-table-column",{attrs:{label:"状态",width:"70",align:"center",prop:"status",formatter:t.$consts.bookStatus.tableFormater},scopedSlots:t._u([{key:"default",fn:function(i){return e("el-tag",{attrs:{type:t.$consts.bookStatus[i.row.status].type}},[t._v(t._s(t.$consts.bookStatus[i.row.status].text))])}}])}),e("el-table-column",{attrs:{label:"修改日期",width:"100",align:"center",prop:"lasttime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatTime(e.row.lasttime,"{y}-{m}-{d}")))]}}])}),e("el-table-column",{attrs:{label:"操作","class-name":"table-link-btton",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.itemDialogPlus.show(i.row)}}},[t._v("修改")]),e("el-link",{attrs:{type:"warning"},on:{click:function(e){return t.handleDelet(i.row)}}},[t._v("删除")])]}}])})],1)],1),e("Pagination",{attrs:{total:t.total,size:t.search.size,index:t.search.index},on:{"update:size":function(e){return t.$set(t.search,"size",e)},"update:index":function(e){return t.$set(t.search,"index",e)},pagination:t.loadData}}),e("BookDetail",{ref:"itemDetail"}),e("BookDialog",{ref:"itemDialog",on:{updated:t.loadData}}),e("BookDialogPlus",{ref:"itemDialogPlus",on:{updated:t.loadData}})],1)}),[],!1,null,"1ae4289e",null).exports},4363:function(){},1806:function(t,e,i){"use strict";i.d(e,{kY:function(){return c},t6:function(){return o},vK:function(){return l},zx:function(){return s}});var a=i(8638);const l={bookTag:"bookTag",bookType:"bookType"},s={value:"id",label:"name",emitPath:!1,checkStrictly:!0,disabled:"disabled"};function o(t,e=!1){return a.Z.dicdata({code:t}).then((t=>!t.data||t.data.length<=0?[]:e?r(t.data,0):t.data.sort(n)))}function r(t,e){let i=t.filter((t=>t.pid==e));return!i||i.length<=0?[]:(i.sort(n).forEach((e=>{const i=r(t,e.id);i&&i.length>0&&(e.children=i.sort(n))})),i)}function n(t,e){return t.sort-e.sort}function c(t,e){u(t,!1),e&&(e.disabled=!0,u(e.children,!0))}function u(t,e){!t||t.length<=0||t.forEach((t=>{t.disabled=e,u(t.children,e)}))}},1743:function(t,e,i){"use strict";function a(t,e){if(0===arguments.length||!t)return null;const i=e||"{y}-{m}-{d} {h}:{i}:{s}";let a;"object"==typeof t?a=t:("string"==typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"==typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));const l={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},s=i.replace(/{([ymdhisa])+}/g,((t,e)=>{const i=l[e];return"a"===e?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return s}i.d(e,{m:function(){return a}})}}]);
//# sourceMappingURL=852.e2aee25b.js.map