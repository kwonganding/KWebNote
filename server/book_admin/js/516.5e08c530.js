"use strict";(self.webpackChunkbookadmin=self.webpackChunkbookadmin||[]).push([[516],{8516:function(o,t,e){e.r(t),e.d(t,{default:function(){return s}});var a={data:()=>({saveLoading:!1,book:{},dialogType:"新增",bookRules:{name:[{required:!0,message:"必填",trigger:"blur"}],author:[{required:!0,message:"必填",trigger:"blur"}]}}),created(){const o=this.$route.params?.id;o?(this.dialogType="修改",this.$axios.get("/api/book/id",{params:{id:o}}).then((o=>{"200"==o.status&&"OK"==o.data.status?this.book=o.data.data:this.$message.error(o.data.message)}))):this.book.status="normal"},methods:{save(){this.saveLoading=!0,this.$refs.bookForm.validate(((o,t)=>{o?this.$axios.post("/api/book/save",this.book).then((o=>{"200"==o.status&&"OK"==o.data.status?(this.$message.success("保存成功"),this.$router.go(-1)):this.$message.error(o.data.message)})):this.$message.error("输入有误，请修改后重新提交！")})),this.saveLoading=!1}}},s=(0,e(1001).Z)(a,(function(){var o=this,t=o._self._c;return t("div",{staticStyle:{"margin-top":"15px"}},[t("el-form",{ref:"bookForm",attrs:{model:o.book,rules:o.bookRules,"label-width":"90px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称：",prop:"name"}},[t("el-input",{attrs:{placeholder:"输入书籍名称",maxlength:"50"},model:{value:o.book.name,callback:function(t){o.$set(o.book,"name",t)},expression:"book.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"作者：",prop:"author"}},[t("el-input",{attrs:{placeholder:"输入书籍作者",maxlength:"50"},model:{value:o.book.author,callback:function(t){o.$set(o.book,"author",t)},expression:"book.author"}})],1)],1)],1),t("el-form-item",{attrs:{label:"上架状态：",prop:"status"}},[t("el-radio-group",{model:{value:o.book.status,callback:function(t){o.$set(o.book,"status",t)},expression:"book.status"}},o._l(o.$consts.bookStatus.entries,(function(e){return t("el-radio",{key:e.key,attrs:{border:"",label:e.key}},[o._v(o._s(e.text))])})),1)],1),t("el-form-item",{attrs:{label:"简介："}},[t("el-input",{attrs:{maxlength:"600",type:"textarea",autosize:{minRows:2,maxRows:5},"show-word-limit":""},model:{value:o.book.introduction,callback:function(t){o.$set(o.book,"introduction",t)},expression:"book.introduction"}})],1),t("el-form-item",{attrs:{label:"图片："}},[t("el-input",{attrs:{placeholder:"图片url地址"},model:{value:o.book.img,callback:function(t){o.$set(o.book,"img",t)},expression:"book.img"}})],1),t("el-form-item",{attrs:{label:""}},[t("div",{staticClass:"dialog-imgbox"},[t("img",{directives:[{name:"show",rawName:"v-show",value:o.book.img,expression:"book.img"}],attrs:{src:o.book.img,alt:""}})])])],1),t("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{icon:"el-icon-circle-close"},on:{click:function(t){return o.$router.go(-1)}}},[o._v("取消")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-success",loading:o.saveLoading},on:{click:o.save}},[o._v("保存")])],1)],1)}),[],!1,null,"eb8ea79a",null).exports}}]);
//# sourceMappingURL=516.5e08c530.js.map